[[extend 'layout.html']]

<!-- font awesome 5 has more icons -->
<script src="https://kit.fontawesome.com/fa6256f5b0.js" crossorigin="anonymous"></script>

<script>
	const images = []
	[[for d in range(0,len(data)):]]
	images[ [[=d]] ] = {
			id: "[[ = data[d]["id"] ]]",
			data: "[[ = data[d]["image_data"] ]]",
			title: "[[ = data[d]["title"] ]]",
			artist: "[[ = data[d]["user_email"] ]]",
			date: "[[ = data[d]["date_added"] ]]",
			owner: "[[ = owner[d] ]]",
		}
	[[pass]]
</script>

<link rel="stylesheet" type="text/css" href="css/index.css">

<template id="_editorCloseButton">
	<a class="button is-danger" onclick="toggleEditor(); clearData()" id="editorCloseButton" style="position: fixed">
		<span class="icon">
			<i class="fa fa-fw fa-times"></i>
		</span>
	</a>
</template>

<template id="_editorPostButton">
	<a class="button is-success" onclick="dataToString()" id="editorPostButton" style="position: fixed; padding: 32px; padding-left: 64px; padding-right: 64px">
		<span>
			Post!
		</span>
	</a>
</template>

<template id="_editButton">
	<a class="button is-primary" onclick="toggleEditor()" id="editButton">
		<span>
			<span class="icon">
				<i class="fa fa-fw fa-pencil"></i>
			</span>
			New Picto
		</span>
	</a>
</template>

<template id="_editorTitle">
	<div class="field" id="editorTitle" style="position: fixed;">
		<input type="title" id="editorTitleVal" placeholder="untitled">
	</div>
</template>

<template id="_editorToolMenu">
	<div id="editorToolMenu">
		<button class="editorToolMenuButton"> <i class="fa fa-paint-brush" style="font-size: 3em;"></i> </button> <br>
		<button class="editorToolMenuButton"> <i class="fa fa-eraser" style="font-size: 3em;"></i> </button> <br>
		<button class="editorToolMenuButton"> <i class="fa fa-font" style="font-size: 3em;"></i> </button> <br>
		<button class="editorToolMenuButton"> <i class="fa fa-fill-drip" style="font-size: 3em;"></i> </button> <br>
	</div>
</template>

<template id="_dim">
	<div id="dim"></div>
</template>

<template id="_feedEntry">
	<div class="box">
		<article class="media">
			<div class="media-content">
				<div class="content">
					<p>
					<div class="feedEntryTitle"></div>
					<div class="feedEntryUser"></div>
					<br>
						<canvas class=feedCanvas ></canvas>
					</p>
				</div>
				<nav class="level is-mobile">
					<div class="level-left">
						<a class="level-item" aria-label="retweet">
							<span class="icon is-small">
								<i class="fa fa-retweet" aria-hidden="true"></i>
							</span>
						</a>
						<a class="level-item" aria-label="like">
							<span class="icon is-small">
								<i class="fa fa-heart" aria-hidden="true"></i>
							</span>
						</a>
						<div class="feedTrash"></div>
					</div>
				</nav>
			</div>
		</article>
	</div>
</template>

<template id="_friendInput">
	<div id="friendInput" style="position: absolute; width: 300px; top: 64; left: 64;">
		<input class="input" id="codeInput" type="text">
		<input class="input" type="button" value="Add Friend" onclick="addFriend()">
	</div>
</template>

<div class="section">
	<div id="editorDiv">
		<canvas id="editorCanvas"></canvas>
	</div>

	<div id="drawings"></div>
</div>

<script>
	const width = 128
	const height = 64
	let showEditor = true

	const fromTemplate = (template) => {
		return document.getElementById(template).content.firstElementChild.cloneNode(true)
	}

	const addFriend = () => {
		let link = window.location.href
		let code = document.getElementById("codeInput").value
		if (code == "") {
			return
		}
    	window.location.href = link.substring(0, link.length - 5) + "add_friend/" + code
	}

	const deleteImage = (id) => {
		let link = window.location.href
    	window.location.href = link.substring(0, link.length - 5) + "delete_image/" + id
	}
</script>
<script src="js/viewer.js"></script>
<script src="js/editor.js"></script>
<script> toggleEditor() </script>
