[[extend 'layout.html']]

<script>
	const images = []
		[[for d in range(0,len(data)):]]
		images[ [[=d]] ] = {
				data: "[[ = data[d]["image_data"] ]]",
				title: "[[ = data[d]["title"] ]]",
				artist: "[[ = data[d]["user_email"] ]]",
				date: "[[ = data[d]["date_added"] ]]",
			}
		[[pass]]
</script>

<style type="text/css">
	#drawings {
		width: min(100vw, 500px);
		padding-left: 0;
	    padding-right: 0;
	    margin-left: auto;
	    margin-right: auto;
	    display: block;
	}

	#editorCanvas {
		position: fixed;
	}

	#dim {
		position: fixed;
		padding: 0;
		margin: 0;
		width: 100vw;
		height: 100vh;
		left: 0px;
		top: 0px;
		background-color: rgba(0,0,0, 0.75);
	}

	#editorPostButton {
		position: fixed;
		left: 120px;
		top: 120px;
	}
</style>

<template id="_editorCloseButton">
	<a class="button is-danger" onclick="toggleEditor(); clearData()" id="editorCloseButton" style="position: fixed">
		<span class="icon">
			<i class="fa fa-fw fa-times"></i>
		</span>
	</a>
</template>

<template id="_editorPostButton">
	<a class="button is-success" onclick="dataToString()" id="editorPostButton" style="position: fixed; padding: 32px; padding-left: 64px; padding-right: 64px">
		<span>
			Post!
		</span>
	</a>
</template>

<template id="_editButton">
	<a class="button is-primary" onclick="toggleEditor()" id="editButton" style="position: fixed">
		<span>
			<span class="icon">
				<i class="fa fa-fw fa-pencil"></i>
			</span>
			New Picto
		</span>
	</a>
</template>

<template id="_dim">
	<div id="dim"></div>
</template>

<div class="section">
	<div id="editorDiv">
		<canvas id="editorCanvas"></canvas>
	</div>

	<input id="codeInput" type="text">
	<input type="button" value="Add Friend" onclick="addFriend()">

	<div id="drawings"></div>
</div>

<script>
	const width = 128
	const height = 64
	let showEditor = true

	const addFriend = () => {
		let link = window.location.href
    	window.location.href = link.substring(0, link.length - 5) + "add_friend/" + document.getElementById("codeInput").value
	}
</script>
<script src="js/viewer.js"></script>
<script src="js/editor.js"></script>
<script> toggleEditor() </script>
